<!DOCTYPE html>
<html>
  <head>
    <title>mp3 file path save</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <h1>mp3 file path save</h1>
    <form onsubmit="event.preventDefault(); uploadAndSavePath();">
      <input type="file" id="file" name="file" accept=".mp3" />
      <button type="submit">경로 저장</button>
    </form>
    <button onclick="mettingRoom()">Create MettingRoom ID</button>

    <script type="text/javascript">
      function uploadAndSavePath() {
        var formData = new FormData();
        formData.append("file", document.getElementById("file").files[0]);

        axios
          .post("/saveAudioFilePath", formData)
          .then(function (response) {
            alert("File uploaded and path saved successfully!");
          })
          .catch(function (error) {
            if (error.response && error.response.status === 401) {
              alert(error.response.data);
              setTimeout(function () {
                alert(null);
              }, 3000);
            } else {
              alert("파일을 선택해주세요.");
            }
          });
      }

      function mettingRoom() {
        axios
          .get("/mettingRoom")
          .then(function (response) {
            alert(response.data);
          })
          .catch(function (error) {
            console.log(error);
          });
      }
    </script>
  </body>
</html>
